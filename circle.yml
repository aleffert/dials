machine:
    xcode:
        version: "7.0"
dependencies:
    pre:
        - brew upgrade
        - brew update xctool
test:
    override:
        - xctool
          -reporter pretty
          -reporter junit:$CIRCLE_TEST_REPORTS/xcode/ios-results.xml
          -reporter plain:$CIRCLE_ARTIFACTS/ios-xctool.log
          -sdk iphonesimulator
          -workspace "Dials.xcworkspace"
          -scheme "DialsExample - iOS"
          build
        - xctool -reporter pretty
          -reporter junit:$CIRCLE_TEST_REPORTS/xcode/desktop-results.xml
          -reporter plain:$CIRCLE_ARTIFACTS/desktop-xctool.log
          -sdk macosx
          -workspace "Dials.xcworkspace"
          -scheme "Dials+ExamplePlugin - Desktop"
          build
        - xctool -reporter pretty
          -reporter junit:$CIRCLE_TEST_REPORTS/xcode/desktop-results.xml
          -reporter plain:$CIRCLE_ARTIFACTS/desktop-xctool.log
          -sdk macosx
          -workspace "Dials.xcworkspace"
          -scheme "Dials.app - Desktop"
          run-tests
